<html>
    <head>
        <meta content="width=device-width, initial-scale=1" name="viewport" />

        <title>DSA Code</title>
        
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100..900;1,100..900&family=Roboto+Mono:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">
        
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/default.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
        
        <script>hljs.highlightAll();</script>
        
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        
        <div class="program">
            <h2>
                Sparse Matrix
            </h2>

            <p>
                Aim : To write a C program to convert and add 2 sparse matrices or to find the transpose of a sparse matrix.
            </p>

            <pre class="code"><code class="language-c">
#include &lt; stdio.h &gt;

void printSparseMat(int spMat[][3], int e)
{
    printf("Tuple Form : \n");
    for (int i = 0; i < e; i++)
	{
        printf("[%d %d %d]\n", spMat[i][0], spMat[i][1], spMat[i][2]);
    }
}

int sparseMat(int mat[][10], int r, int c, int spMat[][3])
{
    int k = 0;
    for (int i = 0; i < r; i++) {
        for (int j = 0; j < c; j++)
		{
            if (mat[i][j] != 0)
			{
                spMat[k][0] = i;
                spMat[k][1] = j;
                spMat[k][2] = mat[i][j];
                k++;
            }
        }
    }
    return k;
}

void addMat(int matA[][3], int matB[][3], int matC[][3], int aCount, int bCount)
{
    int i = 0, j = 0, k = 0;

    while (i < aCount && j < bCount)
	{
        if (matA[i][0] == matB[j][0] && matA[i][1] == matB[j][1])
		{
            matC[k][0] = matA[i][0];
            matC[k][1] = matA[i][1];
            matC[k++][2] = matA[i++][2] + matB[j++][2];
        } else if ((matA[i][0] < matB[j][0]) || (matA[i][0] == matB[j][0] && matA[i][1] < matB[j][1]))
		{
            matC[k][0] = matA[i][0];
            matC[k][1] = matA[i][1];
            matC[k][2] = matA[i][2];
            i++; k++;
        } else 
		{
            matC[k][0] = matB[j][0];
            matC[k][1] = matB[j][1];
            matC[k][2] = matB[j][2];
            j++; k++;
        }
    }

    while (i < aCount)
	{
        matC[k][0] = matA[i][0];
        matC[k][1] = matA[i][1];
        matC[k][2] = matA[i][2];
        i++; k++;
    }

    while (j < bCount)
	{
        matC[k][0] = matB[j][0];
        matC[k][1] = matB[j][1];
        matC[k][2] = matB[j][2];
        j++; k++;
    }

	printf("Sum of Matrices is : \n");
    printSparseMat(matC, k);
}

void transposeMat(int mat[][3], int count)
{
	int temp;
	
	for (int i = 0; i < count; i++)
	{
		temp = mat[i][0];
		mat[i][0] = mat[i][1];
		mat[i][1] = temp;
	}
	
	printf("Transpose of the Matrix is : \n");
	printSparseMat(mat, count);
}

int main() {
    int A[10][10], B[10][10], SpA[100][3], SpB[100][3], SpC[200][3];
    int ar, ac, br, bc, choice;

	printf("1. Addition\n2. Transpose\nInput selection[1/2] : ");
	scanf("%d", &choice);

	switch (choice)
	{
	case 1:
		printf("Input size of matrix 1 | row col : ");
		scanf("%d %d", &ar, &ac);

		for (int i = 0; i < ar; i++)
		{
			for (int j = 0; j < ac; j++)
			{
				printf("Input element A.%d.%d : ", i + 1, j + 1);
				scanf("%d", &A[i][j]);
			}
		}

		printf("Input size of matrix 2 | row col : ");
		scanf("%d %d", &br, &bc);

		if (ar != br || ac != bc)
		{
			printf("Matrix dimensions must match for addition.\n");
			return 1;
		}

		for (int i = 0; i < br; i++)
		{
			for (int j = 0; j < bc; j++)
			{
				printf("Input element B.%d.%d : ", i + 1, j + 1);
				scanf("%d", &B[i][j]);
			}
		}

		int aCount = sparseMat(A, ar, ac, SpA);
		int bCount = sparseMat(B, br, bc, SpB);

		addMat(SpA, SpB, SpC, aCount, bCount);
		break;
	
	case 2:
		printf("Input size of matrix | row col : ");
		scanf("%d %d", &ar, &ac);

		for (int i = 0; i < ar; i++)
		{
			for (int j = 0; j < ac; j++)
			{
				printf("Input element A.%d.%d : ", i + 1, j + 1);
				scanf("%d", &A[i][j]);
			}
		}

		int count = sparseMat(A, ar, ac, SpA);

		transposeMat(SpA, count);

		break;
		
	default:
		printf("Incorrect choice. Aborting...");
	}
	
    return 0;
}
            </code></pre>

            <p>
                Result : The program to convert and add 2 sparse matrices or to find the transpose of a sparse matrix is executed and output is verified.
            </p>
        </div>
    </body>
</html>